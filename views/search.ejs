<head>
    <link rel="stylesheet" href="../css/dashboard.css">

    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .sButton {
            background-color: #4CAF50;
            color: white;
            padding: 12px 20px;
            border: none;
            cursor: pointer;
            width: 100%;
            margin-bottom: 10px;
            max-width: 600px;
            position: fixed;
            bottom: 2%;
            /* in center */
            left: 50%;
            transform: translateX(-50%)
        }
    </style>


</head>

<body>
    <!--  -->
    <%-include('./layouts/header', {activePage: 'search' }) %>
        <section class="w-full h-full ">

            <div class="topfaltu">
                <h1>container</h1>
            </div>
        </section>
        <!-- Responsive Sections -->
        <div class="container-sm d-block my-4 mt-6 mb-[4rem]">
            <div class="row g-4">
                <!-- Left Sidebar -->
                <div class="col-12 col-md-4 col-lg-3 d-none d-lg-block">
                    <div class="card custom-card border">
                        <div class="img cursor-pointer" id="profile-icon">
                            <img src="<%= currentUser.profileImage %>" class="card-img-top w-full p-0"
                                alt="Profile Image">
                        </div>
                        <div class="card-body p-3">
                            <div class="card-title borderBottom mt-2 pb-2">
                                <div class="name d-flex flex-col items-center">
                                    <h5>
                                        <%= currentUser.name %> | BDS2025
                                    </h5>
                                </div>
                            </div>
                            <div class="card-data d-flex flex-col items-start borderBottom">
                                <div
                                    class="card-text d-flex flex-row justify-between pb-3 relative pr-0 d-block w-full">
                                    <div class="email"><span class="label">Email is:</span>
                                        <span class="value">
                                            <%= currentUser.email %>
                                        </span>
                                    </div>
                                    <div class="status absolute right-0 bottom-0">
                                        <% if (currentUser.isEmailVerified===true) { %>
                                            <div class="status-2">
                                                <span class="text-success"> Verified</span>
                                            </div>
                                            <% } else { %>
                                                <div class="status-2">
                                                    <a href=""><span class="text-danger">Verify Now!</span></a>
                                                </div>
                                                <% } %>
                                    </div>
                                </div>
                                <div
                                    class="card-text d-flex flex-row justify-between mt-2 relative d-block w-full flex-md-col">
                                    <div class="email"><span class="label">Phone No:</span>
                                        <span class="value">
                                            <%= currentUser.phone %>
                                        </span>
                                    </div>
                                    <div class="status absolute right-0 bottom-0">
                                        <% if (currentUser.isMnoVerified===true) { %>
                                            <div class="status-2">
                                                <span class="text-success"> Verified</span>
                                            </div>
                                            <% } else { %>
                                                <div class="status-2">
                                                    <a href=""><span class="text-danger">Verify Now!</span></a>
                                                </div>
                                                <% } %>
                                    </div>
                                </div>
                            </div>
                            <div class="search pt-2 text-success">
                                <div class="btn w-full">
                                    <a href="/search">Search <i class="fa-solid fa-search ml-2"></i></a>
                                </div>
                            </div>
                            <div class="upgrade text-center">
                                <a href="/upgrade" class="btn btn-danger w-full">Upgrade Now!</a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Center Section -->
                <div class="col-12 col-md-12 col-lg-6">
                    <div class="container mb-5">
                        <h2 class="text-start mb-4 fs-4">Search for Your <span class="text-success ">Perfect</span>
                            Match</h2>
                        <form action="/search" method="post" class="border p-2 rounded">
                            <div class="row g-3">
                                <!-- Age Fields -->
                                <!-- Minimum age -->
                                <div class="col-md-3 w-1/2">
                                    <label for="minAge" class="form-label">Min Age</label>
                                    <select class="form-select" id="age" name="minAge">
                                        <option value="1" selected hidden>Select Min Age</option>
                                        <!-- options starting from 18 to 70 -->
                                        <option value="18">18</option>
                                        <option value="19">19</option>
                                        <option value="20">20</option>
                                        <option value="21">21</option>
                                        <option value="22">22</option>
                                        <option value="23">23</option>
                                        <option value="24">24</option>
                                        <option value="25">25</option>
                                        <option value="26">26</option>
                                        <option value="27">27</option>
                                        <option value="28">28</option>
                                        <option value="29">29</option>
                                        <option value="30">30</option>
                                        <option value="31">31</option>
                                        <option value="32">32</option>
                                        <option value="33">33</option>
                                        <option value="34">34</option>
                                        <option value="35">35</option>
                                        <option value="36">36</option>
                                        <option value="37">37</option>
                                        <option value="38">38</option>
                                        <option value="39">39</option>
                                        <option value="40">40</option>
                                        <option value="41">41</option>
                                        <option value="42">42</option>
                                        <option value="43">43</option>
                                        <option value="44">44</option>
                                        <option value="45">45</option>
                                        <option value="46">46</option>
                                        <option value="47">47</option>
                                        <option value="48">48</option>
                                        <option value="49">49</option>
                                        <option value="50">50</option>
                                        <option value="51">51</option>
                                        <option value="52">52</option>
                                        <option value="53">53</option>
                                        <option value="54">54</option>
                                        <option value="55">55</option>
                                        <option value="56">56</option>
                                        <option value="57">57</option>
                                        <option value="58">58</option>
                                        <option value="59">59</option>
                                        <option value="60">60</option>
                                        <option value="61">61</option>
                                        <option value="62">62</option>
                                        <option value="63">63</option>
                                        <option value="64">64</option>
                                        <option value="65">65</option>
                                        <option value="66">66</option>
                                        <option value="67">67</option>
                                        <option value="68">68</option>
                                        <option value="69">69</option>
                                        <option value="70">70</option>
                                        <option value="71">71</option>
                                    </select>
                                </div>
                                <!-- Max age -->
                                <div class="col-md-3 w-1/2">
                                    <label for="maxAge" class="form-label">Max Age</label>
                                    <select name="maxAge" id="" class="form-select">
                                        <option value="100" selected>select Max Age</option>
                                        <option value="18">18</option>
                                        <option value="19">19</option>
                                        <option value="20">20</option>
                                        <option value="21">21</option>
                                        <option value="22">22</option>
                                        <option value="23">23</option>
                                        <option value="24">24</option>
                                        <option value="25">25</option>
                                        <option value="26">26</option>
                                        <option value="27">27</option>
                                        <option value="28">28</option>
                                        <option value="29">29</option>
                                        <option value="30">30</option>
                                        <option value="31">31</option>
                                        <option value="32">32</option>
                                        <option value="33">33</option>
                                        <option value="34">34</option>
                                        <option value="35">35</option>
                                        <option value="36">36</option>
                                        <option value="37">37</option>
                                        <option value="38">38</option>
                                        <option value="39">39</option>
                                        <option value="40">40</option>
                                        <option value="41">41</option>
                                        <option value="42">42</option>
                                        <option value="43">43</option>
                                        <option value="44">44</option>
                                        <option value="45">45</option>
                                        <option value="46">46</option>
                                        <option value="47">47</option>
                                        <option value="48">48</option>
                                        <option value="49">49</option>
                                        <option value="50">50</option>
                                        <option value="51">51</option>
                                        <option value="52">52</option>
                                        <option value="53">53</option>
                                        <option value="54">54</option>
                                        <option value="55">55</option>
                                        <option value="56">56</option>
                                        <option value="57">57</option>
                                        <option value="58">58</option>
                                        <option value="59">59</option>
                                        <option value="60">60</option>
                                        <option value="61">61</option>
                                        <option value="62">62</option>
                                        <option value="63">63</option>
                                        <option value="64">64</option>
                                        <option value="65">65</option>
                                        <option value="66">66</option>
                                        <option value="67">67</option>
                                        <option value="68">68</option>
                                        <option value="69">69</option>
                                        <option value="70">70</option>
                                        <option value="71">71</option>

                                    </select>
                                </div>

                                <!-- Height Fields minimum -->
                                <div class="col-md-3 w-1/2">
                                    <label for="minHeight" class="form-label">Min Height</label>
                                    <!--  -->
                                    <select class="form-select" id="minHeight" name="minHeight">
                                        <option value="48">Select Minimum Height</option>
                                    </select>
                                </div>
                                <!-- MAx height -->
                                <div class="col-md-3 w-1/2">
                                    <label for="maxHeight" class="form-label">Max Height</label>
                                    <!--  -->
                                    <select class="form-select" id="maxHeight" name="maxHeight">
                                        <option value="84">Select Maximum Height</option>
                                    </select>
                                </div>
                                <!-- Religion -->
                                <div class="col-md-3 w-1/2">
                                    <label for="religion">Religion:</label>
                                    <select id="religion" name="religion" class="form-select">
                                        <option value="">-- Select Religion --</option>
                                    </select>
                                </div>
                                <!-- Caste -->
                                <div class="col-md-3 w-1/2">
                                    <label for="caste">Caste:</label>
                                    <select id="caste" name="caste" class="form-select">
                                        <option value="">-- Select Caste --</option>
                                    </select>
                                </div>
                                <!-- Marital Status -->
                                <div class="col-md-4 w-1/2">
                                    <label for="maritalStatus" class="form-label">Marital Status</label>
                                    <select class="form-select" id="maritalStatus" name="maritalStatus">
                                        <option value="" selected hidden>Marital Status</option>
                                        <option value="Never Married">Never Married</option>
                                        <option value="Divorced">Divorced</option>
                                        <option value="Waiting for Divorced">Waiting for Divorced</option>
                                        <option value="Widowed">Widowed</option>
                                    </select>
                                </div>

                                <!-- Mother Tongue -->
                                <div class="col-md-4 w-1/2">
                                    <label for="motherTongue" class="form-label">Mother Tongue</label>
                                    <select class="form-select" id="motherTongue" value="" name="motherTongue">
                                        <option value="" selected hidden>Mother Tongue</option>
                                        <option value="English">English</option>
                                        <option value="Hindi">Hindi</option>
                                        <option value="Marathi">Marathi</option>
                                        <option value="Tamil">Tamil</option>
                                        <option value="Telugu">Telugu</option>
                                        <option value="Gujarati">Gujarati</option>
                                        <option value="Kannada">Kannada</option>
                                        <option value="Malayalam">Malayalam</option>
                                        <option value="Bengali">Bengali</option>
                                        <option value="Oriya">Oriya</option>
                                        <option value="Punjabi">Punjabi</option>
                                        <option value="Sindhi">Sindhi</option>
                                    </select>
                                </div>
                                <!-- Income Fields -->
                                <!-- Minmum Income -->
                                <div class="col-md-4 w-1/2">
                                    <label for="minIncome" class="form-label">Min Income (per annum)</label>
                                    <!-- <select name="minIncome" id="minIncome" class="form-control">
                                        <option value="0">No Income</option>
                                        <option value="100000">Rs. 0 - 1 Lakh</option>
                                        <option value="200000">Rs. 1 - 2 Lakh</option>
                                        <option value="300000">Rs. 2 - 3 Lakh</option>
                                        <option value="400000">Rs. 3 - 4 Lakh</option>
                                        <option value="500000">Rs. 4 - 5 Lakh</option>
                                        <option value="750000">Rs. 5 - 7.5 Lakh</option>

                                        <option value="850000">Rs. 7.5 - 8.5 Lakh</option>
                                        <option value="950000">Rs. 8.5 - 9.5 Lakh</option>
                                        <option value="1000000">Rs. 9.5 - 10 Lakh</option>
                                        <option value="2000000">Rs. 10 - 20 Lakh</option>
                                        <option value="3500000">Rs. 25 - 35 Lakh</option>
                                        <option value="5000000">Rs. 35 - 50 Lakh</option>
                                        <option value="7000000">Rs. 50 - 70 Lakh</option>
                                        <option value="10000000">Rs. 70 Lakh - above</option>
                                    </select> -->
                                </div>
                                <!-- MAximum Income -->
                                <!-- <div class="col-md-4 w-1/2">
                                    <label for="maxIncome" class="form-label">Max Income (per annum)</label>
                                    <select name="maxIncome" id="maxIncome" class="form-control">
                                        <option value="10000000"> Does Not Matter</option>
                                        <option value="100000">Rs. 0 - 1 Lakh</option>
                                        <option value="200000">Rs. 1 - 2 Lakh</option>
                                        <option value="300000">Rs. 2 - 3 Lakh</option>
                                        <option value="400000">Rs. 3 - 4 Lakh</option>
                                        <option value="500000">Rs. 4 - 5 Lakh</option>
                                        <option value="750000">Rs. 5 - 7.5 Lakh</option>

                                        <option value="850000">Rs. 7.5 - 8.5 Lakh</option>
                                        <option value="950000">Rs. 8.5 - 9.5 Lakh</option>
                                        <option value="1000000">Rs. 9.5 - 10 Lakh</option>
                                        <option value="2000000">Rs. 10 - 20 Lakh</option>
                                        <option value="3500000">Rs. 25 - 35 Lakh</option>
                                        <option value="5000000">Rs. 35 - 50 Lakh</option>
                                        <option value="7000000">Rs. 50 - 70 Lakh</option>
                                        <option value="10000000">Rs. 70 Lakh - above</option>
                                    </select>
                                </div> -->
                                <!-- Location Fields country -->
                                <div class="col-md-4">
                                    <label for="country" class="form-label">Country</label>
                                    <select class="form-select country form-select" aria-label="Default select example"
                                        onchange="loadStates()" name="country" id="country">
                                        <option value="" selected>Select Country</option>
                                    </select>
                                </div>
                                <!-- State -->
                                <div class="col-md-4">
                                    <label for="state" class="form-label">State</label>
                                    <select class="form-select state sameBgColor" aria-label="Default select example"
                                        onchange="loadCities()" required name="state" id="state">
                                        <option selected>Select State </option>
                                    </select>
                                </div>
                                <!-- City -->
                                <div class="col-md-4">
                                    <label for="city" class="form-label">City</label>
                                    <select class="form-select city" aria-label="Default select example" required
                                        name="city" id="city">
                                        <option selected>Select City</option>
                                    </select>
                                </div>
                                <!-- Education -->
                                <div class="col-md-6">
                                    <label for="education" class="form-label">Education</label>
                                    <input type="text" class="form-control" id="education" name="education"
                                        placeholder="Education">
                                </div>

                                <!-- Occupation -->
                                <div class="col-md-6">
                                    <label for="occupation" class="form-label">Occupation</label>
                                    <select id="occupation" class="form-select" name="occupation">
                                        <option value="">--Select Occupation--</option>

                                        <optgroup label="Government">
                                            <option value="Civil Servant">Civil Servant</option>
                                            <option value="Government Officer">Government Officer</option>
                                            <option value="PSU Employee">PSU Employee</option>
                                            <option value="Bank Officer">Bank Officer</option>
                                            <option value="RBI Officer">RBI Officer</option>
                                            <option value="Other">Other</option>
                                        </optgroup>

                                        <optgroup label="Private">
                                            <option value="Corporate Employee">Corporate Employee</option>
                                            <option value="Manager">Manager</option>
                                            <option value="Software Engineer">Software Engineer</option>
                                            <option value="Investment Banker">Investment Banker</option>
                                            <option value="Financial Analyst">Financial Analyst</option>
                                            <option value="Banker">Banker</option>
                                            <option value="Risk Manager">Risk Manager</option>
                                            <option value="Loan Officer">Loan Officer</option>
                                            <option value="Other">Other</option>
                                        </optgroup>

                                        <optgroup label="Business">
                                            <option value="Business Owner">Business Owner</option>
                                            <option value="Entrepreneur">Entrepreneur</option>
                                            <option value="Franchise Owner">Franchise Owner</option>
                                            <option value="Other">Other</option>
                                        </optgroup>

                                        <optgroup label="Defence">
                                            <option value="Army Officer">Army Officer</option>
                                            <option value="Navy Officer">Navy Officer</option>
                                            <option value="Air Force Officer">Air Force Officer</option>
                                            <option value="Other">Other</option>
                                        </optgroup>

                                        <optgroup label="Self Employed">
                                            <option value="Freelancer">Freelancer</option>
                                            <option value="Consultant">Consultant</option>
                                            <option value="Contractor">Contractor</option>
                                            <option value="Other">Other</option>
                                        </optgroup>

                                        <optgroup label="Not Working">
                                            <option value="Student">Student</option>
                                            <option value="Homemaker">Homemaker</option>
                                            <option value="Retired">Retired</option>
                                            <option value="Other">Other</option>
                                        </optgroup>

                                    </select>
                                </div>

                                <!-- Mangalik -->
                                <div class="col-md-4 w-1/2">
                                    <label for="mangalik" class="form-label">Mangalik</label>
                                    <select class="form-select" id="astrologicalDosh" name="astrologicalDosh">
                                        <option value="" selected> Dosh </option>
                                        <option value="Mangalik">Mangalik</option>
                                        <option value="Non Mangalik">Non Mangalik</option>
                                        <option value="Anshik Mangalik">Anshik Mangalik</option>
                                    </select>
                                </div>

                                <!-- Diet -->
                                <div class="col-md-4 w-1/2">
                                    <label for="diet" class="form-label">Diet</label>
                                    <select class="form-select" id="eatinhHabits" name="eatinhHabits">
                                        <option value="" selected hidden>Eating Habits</option>
                                        <option value="Veg">Veg</option>
                                        <option value="Non-Veg">Non-Veg</option>
                                    </select>
                                </div>

                                <!-- Submit Button -->
                                <div class="col-12">
                                    <button type="submit" class="btn btn-primary sButton">Search</button>
                                </div>
                            </div>
                        </form>
                    </div>

                </div>

                <!-- Right Sidebar -->
                <div class="col-12 col-md-4 col-lg-3 d-none d-lg-block">
                    <div class="card custom-card border">
                        <div class="img cursor-pointer" id="profile-icon">
                            <img src="<%= currentUser.profileImage %>" class="card-img-top w-full p-0"
                                alt="Profile Image">
                        </div>
                        <div class="card-body p-3">
                            <div class="card-title borderBottom mt-2 pb-2">
                                <div class="name d-flex flex-col items-center">
                                    <h5>
                                        <%= currentUser.name %> | BDS2025
                                    </h5>
                                </div>
                            </div>
                            <div class="card-data d-flex flex-col items-start borderBottom">
                                <div
                                    class="card-text d-flex flex-row justify-between pb-3 relative pr-0 d-block w-full">
                                    <div class="email"><span class="label">Email is:</span>
                                        <span class="value">
                                            <%= currentUser.email %>
                                        </span>
                                    </div>
                                    <div class="status absolute right-0 bottom-0">
                                        <% if (currentUser.isEmailVerified===true) { %>
                                            <div class="status-2">
                                                <span class="text-success"> Verified</span>
                                            </div>
                                            <% } else { %>
                                                <div class="status-2">
                                                    <a href=""><span class="text-danger">Verify Now!</span></a>
                                                </div>
                                                <% } %>
                                    </div>
                                </div>
                                <div
                                    class="card-text d-flex flex-row justify-between mt-2 relative d-block w-full flex-md-col">
                                    <div class="email"><span class="label">Phone No:</span>
                                        <span class="value">
                                            <%= currentUser.phone %>
                                        </span>
                                    </div>
                                    <div class="status absolute right-0 bottom-0">
                                        <% if (currentUser.isMnoVerified===true) { %>
                                            <div class="status-2">
                                                <span class="text-success"> Verified</span>
                                            </div>
                                            <% } else { %>
                                                <div class="status-2">
                                                    <a href=""><span class="text-danger">Verify Now!</span></a>
                                                </div>
                                                <% } %>
                                    </div>
                                </div>
                            </div>
                            <div class="search pt-2 text-success">
                                <div class="btn w-full">
                                    <a href="/search">Search <i class="fa-solid fa-search ml-2"></i></a>
                                </div>
                            </div>
                            <div class="upgrade text-center">
                                <a href="/upgrade" class="btn btn-danger w-full">Upgrade Now!</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <!-- <script src="../js/formInportant.js"></script> -->
        <script src="../js/index.js"></script>
        <script>
            document.addEventListener("DOMContentLoaded", async () => {
                const religionDropdown = document.getElementById("religion");
                const casteDropdown = document.getElementById("caste");
                // const selectedValuesDisplay = document.getElementById("selectedValues");
                // const hiddenReligionInput = document.getElementById("hiddenReligion");

                const response = await fetch("/edit/religion");
                const religions = await response.json();

                // Populate religion dropdown
                religions.forEach(religion => {
                    const option = document.createElement("option");
                    option.value = religion.id; // Use religion ID as the value
                    option.textContent = religion.name; // Display religion name
                    religionDropdown.appendChild(option);
                });

                // Populate caste dropdown based on selected religion
                religionDropdown.addEventListener("change", () => {
                    casteDropdown.innerHTML = '<option value="">Caste</option>'; // Reset caste dropdown
                    const selectedReligion = religions.find(
                        religion => religion.id === religionDropdown.value
                    );
                    if (selectedReligion) {
                        // hiddenReligionInput.value = selectedReligion.name;
                        selectedReligion.castes.forEach(caste => {
                            const option = document.createElement("option");
                            option.value = caste.name; // Use caste name as the value
                            option.textContent = caste.name; // Display caste name
                            casteDropdown.appendChild(option);
                        });
                    }
                });

                // Display selected religion and caste names
                casteDropdown.addEventListener("change", () => {
                    const selectedReligion = religions.find(
                        religion => religion.id === religionDropdown.value
                    );

                    const selectedCasteName = casteDropdown.value; // Get the selected caste name directly

                    if (selectedReligion) {
                        selectedValuesDisplay.textContent = `Selected Religion: ${selectedReligion.name
                            }, Selected Caste: ${selectedCasteName}`;
                    }
                });

                // height of
                // Height dropdown logic for search page
                const minHeightSelect = document.getElementById("minHeight");
                const maxHeightSelect = document.getElementById("maxHeight");

                [minHeightSelect, maxHeightSelect].forEach(select => {
                    if (select) {
                        for (let feet = 4; feet <= 7; feet++) {
                            for (let inches = 0; inches < 12; inches++) {
                                const heightInInches = feet * 12 + inches;
                                const displayHeight = `${feet}' ${inches}"`;
                                const option = document.createElement("option");
                                option.value = heightInInches;
                                option.textContent = displayHeight;
                                select.appendChild(option);
                            }
                        }
                    }
                });
            });
        </script>

</body>